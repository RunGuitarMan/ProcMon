# ProcMon - Windows Kernel Driver –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

## üì¶ –°–æ—Å—Ç–∞–≤ –ø—Ä–æ–µ–∫—Ç–∞

- **ProcMon.sys** (8 704 –±–∞–π—Ç) ‚Äî kernel-mode –¥—Ä–∞–π–≤–µ—Ä –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- **ProcMonClient.exe** (58 880 –±–∞–π—Ç) ‚Äî –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –¥—Ä–∞–π–≤–µ—Ä–æ–º

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

- **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤—Å—é —Ä–∞–±–æ—Ç—É –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º** ‚Äî –æ—à–∏–±–∫–∏ –≤ –¥—Ä–∞–π–≤–µ—Ä–µ –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ BSOD
- –¢—Ä–µ–±—É—é—Ç—Å—è **–ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**
- –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ **Test Mode** (—Ç–µ—Å—Ç–æ–≤–∞—è –ø–æ–¥–ø–∏—Å—å –¥—Ä–∞–π–≤–µ—Ä–æ–≤)

---

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –í–∫–ª—é—á–µ–Ω–∏–µ Test Mode (–æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ)

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:

```cmd
bcdedit.exe -set loadoptions ENABLE_INTEGRITY_CHECKS
bcdedit.exe -set TESTSIGNING ON
bcdedit.exe -set NOINTEGRITYCHECKS OFF
```

**–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–º–ø—å—é—Ç–µ—Ä**. –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –ø–æ—è–≤–∏—Ç—Å—è –≤–æ–¥—è–Ω–æ–π –∑–Ω–∞–∫ "Test Mode".

> üìñ –ü–æ–¥—Ä–æ–±–Ω–µ–µ: [–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–∏—Ñ—Ä–æ–≤–æ–π –ø–æ–¥–ø–∏—Å–∏ –¥—Ä–∞–π–≤–µ—Ä–∞](https://winitpro.ru/index.php/2011/11/08/kak-otklyuchit-proverku-cifrovoj-podpisi-drajvera-v-windows-7/)

---

## üöÄ –ó–∞–ø—É—Å–∫ –¥—Ä–∞–π–≤–µ—Ä–∞

### –®–∞–≥ 1: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥—Ä–∞–π–≤–µ—Ä–∞

```cmd
copy ProcMon.sys C:\Windows\System32\drivers\
```

### –®–∞–≥ 2: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–ª—É–∂–±—ã

```cmd
sc create ProcMon type= kernel binPath= C:\Windows\System32\drivers\ProcMon.sys
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ –¥—Ä–∞–π–≤–µ—Ä–∞

```cmd
sc start ProcMon
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞

–í **–æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ** –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ (–æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞):

```cmd
ProcMonClient.exe
```

---

## üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥—Ä–∞–π–≤–µ—Ä–∞

```cmd
sc stop ProcMon
sc delete ProcMon
```

---

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CLion

–î–ª—è —É–¥–æ–±–Ω–æ–π —Å–±–æ—Ä–∫–∏ –∏–∑ IDE:

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Settings ‚Üí Build, Execution, Deployment ‚Üí Toolchains**
2. –ù–∞–∂–º–∏—Ç–µ **+** ‚Üí **Visual Studio**
3. –í—ã–±–µ—Ä–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é Visual Studio
4. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞–ø—Ä—è–º—É—é –∏–∑ CLion

---

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–∞–Ω–¥ —Å–±–æ—Ä–∫–∏

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Ä—É—á–Ω—É—é —Å–±–æ—Ä–∫—É —á–µ—Ä–µ–∑ `build.bat`:

```cmd
build.bat
```

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–±–æ—Ä–∫–∏:
- `cmake-build-debug\ProcMonDriver\ProcMon.sys`
- `cmake-build-debug\ProcMonClient\ProcMonClient.exe`
